#!/usr/bin/env Rscript
optic <- read.csv("/shared/storage/cs/staffstore/acm538/OPTinstructions.txt", header=TRUE)
opticcumsum<-data.frame(count=optic$Count, optthreadsum=cumsum(rowSums(optic[,-1], na.rm=TRUE)))
postscript("optic.eps")
plot(y = opticcumsum$optthreadsum, x=optic$Count, type="l", col="green", main="Partial execution of benchmark", sub="Green for 4k OPT, red vertical, processor joins, blue vertical, processor leaves", xlab="Simulated ticks", ylab="Lines processed", xlim=range(c(0, max(optic$Count))), ylim=(c(0, max(opticcumsum$optthreadsum))))
abline(v=35606597, col="red")
abline(v=148091392, col="red")
abline(v=192718594, col="red")
abline(v=489106277, col="red")
abline(v=1061592894, col="blue")
abline(v=1216401613, col="red")
abline(v=1234650885, col="red")
abline(v=3152054340, col="red")
abline(v=3265798471, col="red")
abline(v=4243251232, col="red")
abline(v=4945424857, col="red")
abline(v=4946920090, col="red")
abline(v=5523356996, col="red")
abline(v=5645917902, col="red")
abline(v=6754455865, col="red")
abline(v=7678221546, col="red")
abline(v=8490347166, col="red")
abline(v=11383522372, col="blue")
abline(v=13911234846, col="red")
dev.off()
